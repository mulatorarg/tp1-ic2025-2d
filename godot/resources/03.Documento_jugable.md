Perfecto. Te armo un **documento prototipo en Godot Engine 4.4.1** (GDScript), para que tengas una base jugable estilo *Plants vs Zombies*.

---

# Documento Prototipo â€“ *Guardianes del Chaco* en Godot 4.4.1

## Estructura del proyecto

```
res://
 â”œâ”€ scenes/
 â”‚   â”œâ”€ main.tscn
 â”‚   â”œâ”€ tile.tscn
 â”‚   â”œâ”€ guardian.tscn
 â”‚   â”œâ”€ enemy.tscn
 â”‚   â””â”€ resource_icon.tscn
 â”œâ”€ scripts/
 â”‚   â”œâ”€ main.gd
 â”‚   â”œâ”€ tile.gd
 â”‚   â”œâ”€ guardian.gd
 â”‚   â”œâ”€ enemy.gd
 â”‚   â””â”€ resource_manager.gd
 â””â”€ assets/
     â”œâ”€ guardian_sprites/
     â”œâ”€ enemy_sprites/
     â””â”€ ui/
```

---

## Escena principal (main.tscn)

* **Nodo raÃ­z**: `Node2D`
* Hijos:

  * `TileMap` o Grid manual (para filas y columnas).
  * `CanvasLayer` (UI de recursos, botones de selecciÃ³n de Guardianes).
  * `Timer` (spawner de enemigos).
  * `ResourceManager` (control de Semillas, Gotas, Chispas, Susurros).

---

## CÃ³digo: main.gd

```gdscript
extends Node2D

@export var rows := 5
@export var cols := 9
@export var tile_size := Vector2(128, 128)

@onready var tile_scene = preload("res://scenes/tile.tscn")
@onready var enemy_scene = preload("res://scenes/enemy.tscn")

var grid = []
var resource_manager

func _ready():
    resource_manager = $ResourceManager
    create_grid()
    $EnemyTimer.start()

func create_grid():
    for row in rows:
        var grid_row = []
        for col in cols:
            var tile = tile_scene.instantiate()
            tile.position = Vector2(col * tile_size.x, row * tile_size.y)
            add_child(tile)
            grid_row.append(tile)
        grid.append(grid_row)

func _on_EnemyTimer_timeout():
    var enemy = enemy_scene.instantiate()
    enemy.position = Vector2(cols * tile_size.x, randi_range(0, rows-1) * tile_size.y)
    add_child(enemy)
```

---

## Tile (tile.gd)

```gdscript
extends Area2D

var guardian = null

func place_guardian(guardian_scene):
    if guardian == null:
        guardian = guardian_scene.instantiate()
        guardian.position = position
        get_parent().add_child(guardian)
```

---

## Guardian base (guardian.gd)

```gdscript
extends Area2D

@export var cost := {"semillas": 0, "gotas": 0, "chispas": 0, "susurros": 0}
@export var attack_damage := 10
@export var attack_interval := 1.5
@onready var attack_timer := $AttackTimer

func _ready():
    attack_timer.wait_time = attack_interval
    attack_timer.start()

func _on_AttackTimer_timeout():
    shoot()

func shoot():
    # Por simplicidad, imprime en consola.
    # En prototipo real, instanciarÃ­a un proyectil.
    print("%s dispara!" % name)
```

---

## Ejemplo de Guardian especÃ­fico: NdaayÃ© (Arquera del Monte)

```gdscript
extends "res://scripts/guardian.gd"

func shoot():
    var arrow = preload("res://scenes/projectiles/arrow.tscn").instantiate()
    arrow.position = position
    arrow.direction = Vector2.RIGHT
    get_parent().add_child(arrow)
```

---

## Enemy base (enemy.gd)

```gdscript
extends Area2D

@export var speed := 40
@export var health := 100
@onready var anim = $AnimatedSprite2D

func _process(delta):
    position.x -= speed * delta
    if position.x <= 0:
        game_over()

func take_damage(amount):
    health -= amount
    if health <= 0:
        die()

func die():
    queue_free()

func game_over():
    print("Â¡El enemigo alcanzÃ³ la aldea!")
    get_tree().paused = true
```

---

## ResourceManager (resource\_manager.gd)

```gdscript
extends Node

var semillas := 50
var gotas := 50
var chispas := 50
var susurros := 50

signal resources_changed

func add_resource(type: String, amount: int):
    self.set(type, self.get(type) + amount)
    emit_signal("resources_changed")

func spend(cost: Dictionary) -> bool:
    for k in cost.keys():
        if self.get(k) < cost[k]:
            return false
    for k in cost.keys():
        self.set(k, self.get(k) - cost[k])
    emit_signal("resources_changed")
    return true
```

---

## ProgresiÃ³n jugable en Godot

* **Primer nivel**: solo NdaayÃ© (ataque bÃ¡sico) y Kala (muro). Enemigos dÃ©biles (plagas).
* **Segundo nivel**: desbloqueo de Yvera (ralentizar). Aparece Pombero (enemigo que roba recursos).
* **Tercer nivel**: Amaru (fuego) contra Ao Ao (grupo de enemigos).
* **Posteriores**: se suman Guardianes y enemigos segÃºn el esquema narrativo.

---

ðŸ“Œ Esto es un **prototipo base**. Lo podÃ©s ampliar con:

* Animaciones de ataque y daÃ±o.
* Proyectiles con colisiÃ³n.
* UI para seleccionar y colocar Guardianes.
* Spawner avanzado de enemigos con oleadas.
* CinemÃ¡ticas entre niveles (se pueden hacer con escenas `.tscn` de narrativa).

---

Â¿QuerÃ©s que te arme ahora un **nivel de ejemplo completo** en Godot (con un `main.tscn` jugable, 2 Guardianes y 1 enemigo funcional) para que lo tengas listo como prototipo mÃ­nimo?
